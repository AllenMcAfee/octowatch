<html>
	<head>
		<title>Octowatch Configuration</title>
	</head>
	<body>
		<h3>Octoprint Server Settings</h3>
		<ul>
			<li>host: <input id="host">
			<li>port: <input id="port">
			<li>api key: <input id="api_key">
			<li><button id="save_button" onclick="saveSettings()">save</button>
		</ul>
		
		<script>
			function saveSettings(){
				console.log('saving settings');
				
				// get values
				var server_host = document.getElementById('host');
				var server_port = document.getElementById('port');
				var server_api_key = document.getElementById('api_key');
				
				// create options object
				var options = {};
				options.server_host = server_host.value;
				options.server_port = server_port.value;
				options.server_api_key = server_api_key.value;
				
				// debug
				console.log(options);
				
				var location = "pebblejs://close#" + encodeURIComponent(JSON.stringify(options));
				
				console.log('return config');
				console.log(location);
				
				document.location = 'pebblejs://close';
			}
		</script>
	</body>
</html>